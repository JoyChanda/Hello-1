name: Generate Vision Card

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Generate SVG
        run: |
          mkdir -p assets
          cat << 'EOF' > assets/vision-card.svg
          <svg width="360" height="200" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <linearGradient id="g" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#38bdf8"/>
                <stop offset="100%" stop-color="#a78bfa"/>
              </linearGradient>
            </defs>
            <rect x="0" y="0" rx="18" ry="18" width="360" height="200"
              fill="#0d1117" stroke="url(#g)" stroke-width="2"/>
            <text x="24" y="45" fill="#ffffff" font-size="20">ðŸŽ¯ Vision</text>
            <text x="24" y="78" fill="#c9d1d9" font-size="14">Frontend-first mindset</text>
            <text x="24" y="102" fill="#c9d1d9" font-size="14">Design-driven development</text>
            <text x="24" y="126" fill="#c9d1d9" font-size="14">Growing with MERN stack</text>
            <text x="24" y="165" fill="#38bdf8" font-size="12">Auto-updated via GitHub Actions âš¡</text>
          </svg>
          EOF

      - name: Commit
        run: |
          git config user.name "github-actions"
          git config user.email "actions@github.com"
          git add assets/vision-card.svg
          git commit -m "chore: update vision card" || echo "No changes"
          git push
